<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tic Tac Toe Game</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body{
      font-family: Arial, sans-serif;
      background: #3498db;            
      color: #fff;
      display: flex;
      align-items: start;
      justify-content: center;
      padding-top: 16px;
    }

    .container {
      width: 560px;
      max-width: 95%;
      text-align: center;
    }
  
    h1{
      width: 100%;
      text-align: center;
      font-size: 48px;
      margin-bottom: 30px;
      font-weight: 800;
    }

    #controls {
      margin-bottom: 20px;
      display: flex;
      justify-content: center;
      gap: 30px;
      align-items: center
    }

    #controls button, #controls select {
      padding: 10px 18px;
      border-radius: 6px;
      border: none;
      cursor: pointer;
      font-weight: 750;
    }

    #chooseX, #chooseO {
      background: #0672bb;
      color: #fff;
      min-width: 96px;
    }
    #chooseX.active, #chooseO.active {
      background: #ffffff;
      color: #3498db;
    }

    #difficulty {
      background: #95cbf1;
      color: #fff;
    }

    /* --- Plateau Tic Tac Toe --- */
    #board {
      width: 360px;
      height: 360px;
      margin: 10px auto 18px;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(3, 1fr);
      gap: 0;
      border-left: 6px solid rgba(0,0,0,0.6);
      border-top: 6px solid rgba(0,0,0,0.6);
      box-shadow: 0 6px 18px rgba(0,0,0,0.2);
    }

    .cell {
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 50px;
      color: #fff;
      cursor: pointer;
      background: transparent;
      border-right: 6px solid rgba(0,0,0,0.6);
      border-bottom: 6px solid rgba(0,0,0,0.6);
      user-select: none;
    }

    .cell:hover { transform: translateY(-4px); background: rgba(255,255,255,0.03); }

    /* --- Message & bouton restart --- */
    #message {
      font-size: 20px;
      margin-top: 6px;
      min-height: 28px;
    }

    #restart {
      margin-top: 14px;
      padding: 10px 18px;
      background: #ffffff;
      color: #3498db;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 700;
    }

    #restart:hover { opacity: 0.95; transform: translateY(-2px); }

    /* responsive smaller board on mobile */
    @media (max-width:420px) {
      #board { width: 300px; height: 300px; }
      .cell { font-size: 40px; }
      h1 { font-size: 36px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Tic Tac Toe Game</h1>

    <div id="controls">
      <button id="chooseX" >Play as X</button>
      <button id="chooseO" >Play as O</button>

      <select id="difficulty" aria-label="Difficulty">
        <option value="easy">Easy</option>
        <option value="hard">Hard</option>
      </select>
    </div>

    <div id="board" role="grid" aria-label="Plateau Tic Tac Toe">
      <div class="cell" id="0" data-index="0" role="button" aria-label="case 1"></div>
      <div class="cell" id="1" data-index="1" role="button" aria-label="case 2"></div>
      <div class="cell" id="2" data-index="2" role="button" aria-label="case 3"></div>

      <div class="cell" id="3" data-index="3" role="button" aria-label="case 4"></div>
      <div class="cell" id="4" data-index="4" role="button" aria-label="case 5"></div>
      <div class="cell" id="5" data-index="5" role="button" aria-label="case 6"></div>

      <div class="cell" id="6" data-index="6" role="button" aria-label="case 7"></div>
      <div class="cell" id="7" data-index="7" role="button" aria-label="case 8"></div>
      <div class="cell" id="8" data-index="8" role="button" aria-label="case 9"></div>
    </div>

    <div id="message">Select X or O then click a square to start.</div>
    <button id="restart">Restart</button>
  </div>

  <script>
    // ===== variables =====
    const cells = Array.from(document.querySelectorAll('.cell'));
    const message = document.getElementById('message');
    const restartBtn = document.getElementById('restart');
    const chooseX = document.getElementById('chooseX');
    const chooseO = document.getElementById('chooseO');
    const difficultySelect = document.getElementById('difficulty');

    let board = Array(9).fill('');
    let player = 'X';
    let computer = 'O';
    let gameOver = false;

    const winCombos = [
      [0,1,2],[3,4,5],[6,7,8],
      [0,3,6],[1,4,7],[2,5,8],
      [0,4,8],[6,4,2]
    ];

    //
    function setMessage(text){ message.textContent = text; }
    function renderBoard(){
      board.forEach((val, idx) => {
        cells[idx].textContent = val;
      });
    }
    function checkWin(brd, sym){
      return winCombos.some(combo => combo.every(i => brd[i] === sym));
    }
    function emptyIndices(){
      return board.map((v,i)=> v === '' ? i : null).filter(v => v !== null);
    }

    //
    function startGame(sym) {
  player = sym;
  computer = (sym === 'X') ? 'O' : 'X';
  board.fill('');
  gameOver = false;
  cells.forEach(cell => {
    cell.textContent = '';
    cell.style.pointerEvents = 'auto';
  });
  chooseX.classList.toggle('active', player === 'X');
  chooseO.classList.toggle('active', player === 'O');
}

chooseX.addEventListener('click', () => startGame('X'));
chooseO.addEventListener('click', () => startGame('O'));

// ===== Player's turn =====
cells.forEach(cell => {
  cell.addEventListener('click', () => {
    if (gameOver) return;
    const idx = Number(cell.dataset.index);
    if (board[idx] !== '') return;
    board[idx] = player;
    renderBoard();
    if (checkWin(board, player)) {
      endGame(`You (${player}) won!`);
      return;
    }
    if (emptyIndices().length === 0) {
      endGame('Draw!');
      return;
    }
    // Computer's turn
    setTimeout(() => computerTurn(), 300);
  });
});

// ===== Computer =====
function computerTurn() {
  if (gameOver) return;
  const diff = difficultySelect.value;
  let idx;
  if (diff === 'easy') {
    const empties = emptyIndices();
    idx = empties[Math.floor(Math.random() * empties.length)];
  } else {
    idx = bestMove();
  }
  if (idx === undefined) return;
  board[idx] = computer;
  renderBoard();
  if (checkWin(board, computer)) {
    endGame(`Computer (${computer}) won.`);
    return;
  }
  if (emptyIndices().length === 0) {
    endGame('Draw!');
    return;
  }
}

// ===== Best move (Hard Mode) =====
// 
function bestMove() {
  // 1) Can computer win?
  for (let i of emptyIndices()) {
    const copy = board.slice();
    copy[i] = computer;
    if (checkWin(copy, computer)) return i;
  }
  // 2) Block player
  for (let i of emptyIndices()) {
    const copy = board.slice();
    copy[i] = player;
    if (checkWin(copy, player)) return i;
  }
  // 3) Take center
  if (board[4] === '') return 4;
  // 4) Take a corner
  const corners = [0, 2, 6, 8].filter(i => board[i] === '');
  if (corners.length) return corners[Math.floor(Math.random() * corners.length)];
  // 5) Take a random edge
  const edges = [1, 3, 5, 7].filter(i => board[i] === '');
  if (edges.length) return edges[Math.floor(Math.random() * edges.length)];
  // Fallback
  const empties = emptyIndices();
  return empties.length ? empties[0] : undefined;
}

// ===== End Game =====
function endGame(text) {
  gameOver = true;
  setMessage(text);
  // Disable clicks
  cells.forEach(c => c.style.pointerEvents = 'none');
}

// ===== Restart =====
restartBtn.addEventListener('click', () => {
  board.fill('');
  renderBoard();
  gameOver = false;
  cells.forEach(c => c.style.pointerEvents = 'auto');
  setMessage('Game reset. Play!');
});
    // initialisation
    startGame('X');
  </script>
</body>
</html>
