{% extends "base.html" %}

{% block content %}
<main class="max-w-7xl mx-auto my-10">
  <form action="/create" method="post" enctype="multipart/form-data"
        class="flex flex-col gap-4 max-w-md mx-auto mt-4 p-4 bg-gradient-to-r from-purple-400 to-sky-400 border border-gray-200 rounded-md">
    <h1 class="text-2xl font-bold">Create Book</h1>
    
    <input type="text" name="title" placeholder="Title" class="border border-gray-200 rounded-md p-2" required>
    <input type="number" name="rating" placeholder="Rating" min="0" max="10" step="0.1" class="border border-gray-200 rounded-md p-2">
    <input type="number" name="publication_year" placeholder="Publication Year" min="1900" max="2025" class="border border-gray-200 rounded-md p-2">

    <select name="genre" class="border border-gray-200 rounded-md p-2">
      <option value="" selected disabled>Select Genre</option>
      <option value="Action">Action</option>
      <option value="Adventure">Adventure</option>
      <option value="Comedy">Comedy</option>
      <option value="Drama">Drama</option>
      <option value="Fantasy">Fantasy</option>
      <option value="Horror">Horror</option>
      <option value="Mystery">Mystery</option>
      <option value="Sci-Fi">Sci-Fi</option>
    </select>

    <textarea name="description" placeholder="Description" rows="6" class="border border-gray-200 rounded-md p-2"></textarea>

    <!-- Choisir l'image -->
    <input type="file" name="image" id="imageInput" accept="image/*" class="border border-gray-200 rounded-md p-2">
    <!-- Prévisualisation de l'image avant création -->
    <img id="preview" src="" alt="Image Preview" class="w-full h-64 object-contain mt-4 hidden rounded-md border">

    <button type="submit" class="bg-sky-700 text-white px-4 py-2 rounded-md flex items-center justify-center gap-2">
      <i class="bi bi-plus-lg"></i> Create
    </button>
  </form>
</main>

<script>
  const input = document.getElementById('imageInput');
  const preview = document.getElementById('preview');

  input.addEventListener('change', function() {
      const file = this.files[0];
      if (file) {
          const reader = new FileReader();
          reader.onload = function(e) {
              preview.src = e.target.result;
              preview.classList.remove('hidden');
          }
          reader.readAsDataURL(file);
      }
  });
</script>
{% endblock %}
